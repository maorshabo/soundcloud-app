{"version":3,"sources":["scripts/app-32f0dc6f7c.js"],"names":[],"mappings":"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","file":"scripts/app-32f0dc6f7c.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp', ['ngRoute', 'soundcloudApp.searchContainer','soundcloudApp.imageContainer','soundcloudApp.recentSearches']);\n\n})();\n\n(function(SC) {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .service('SoundCloudAPI', SoundCloudAPI);\n\n  /** @ngInject */\n  function SoundCloudAPI($http) {\n    var self = this;\n    var clientId = 'd652006c469530a4a7d6184b18e16c81';\n    SC.initialize({\n      client_id: clientId\n    });\n\n    // holds the next url in the search results\n    var nextUrl = '';\n    // determine if we are on the last page of results\n    this.isLastPage = true;\n    // search function that gets query and limit and returns a promise\n    this.search = function(query,limit) {\n      return SC.get('/tracks',{\n        q: query,\n        limit: limit,\n        linked_partitioning: 1\n      }).then(getSearchResultsSuccess);\n    };\n\n    this.next = function() {\n      if (nextUrl) {\n        return $http.get(nextUrl).then(getNextResultsSuccess)\n      }\n    };\n\n    var getSearchResultsSuccess = function(results) {\n      nextUrl = results.next_href;\n      if (nextUrl) {\n        this.isLastPage = false\n      }\n      else {\n        this.isLastPage = Object.isDnextUrl\n      }\n      return results.collection;\n    }.bind(this);\n\n    var getNextResultsSuccess = function(httpResponse) {\n      return getSearchResultsSuccess(httpResponse.data);\n    };\n\n    this.getEmbed = function(track_url) {\n      if (track_url)\n        return SC.oEmbed(track_url, { auto_play: true });\n    }\n  }\n})(SC);\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.searchContainer', []);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.searchContainer')\n    .directive('search', search);\n\n  /** @ngInject */\n  function search(SoundCloudAPI,AppService,$timeout,localStorageService) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/searchContainer/searchContainer.html',\n      controller: function() {\n        var vm = this;\n        this.isLoading = false;\n        // holds how much results per page\n        this.resultsPerPage = 6;\n        // hold current view mode state: (list,tiles)\n        this.viewMode = localStorageService.get('viewMode') || 'list';\n        // view model to hold the search query\n        this.searchQuery = '';\n        // holds the search results\n        this.searchResults = [];\n        // get results from the SoundCloudAPI service\n        this.search = function() {\n          this.isLoading = true;\n          this.searchResults = [];\n          SoundCloudAPI.search(this.searchQuery,this.resultsPerPage).then(vm.fetchResults);\n          AppService.addRecentSearch(this.searchQuery);\n        }.bind(this);\n\n        // function to get the next bunch of data\n        this.next = function() {\n          if (!SoundCloudAPI.isLastPage) {\n            this.isLoading = true;\n            SoundCloudAPI.next().then(vm.fetchResults)\n          }\n        }.bind(this);\n\n        // handle click on a result item\n        this.selectResult = function(result) {\n          AppService.selectedSearchResult = result;\n        };\n\n        this.fetchResults = function(results) {\n          $timeout(function() {\n            vm.searchResults = results;\n            vm.isLoading = false;\n          });\n        };\n\n        this.setViewMode = function(viewMode) {\n          this.viewMode = viewMode;\n          localStorageService.set('viewMode',viewMode);\n        }.bind(this);\n      },\n      controllerAs: 'vm'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches', ['LocalStorageModule']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches')\n    .service('RecentSearches', RecentSearches);\n\n  /** @ngInject */\n  function RecentSearches(localStorageService) {\n    // holds the searches history max limit\n    this.searchesLimit = 5;\n    this.recentSearches = [];\n\n    this.loadRecentSearches = function() {\n      if (this.recentSearches.length == 0)\n        this.recentSearches = angular.fromJson(localStorageService.get('recentSearches')) || [];\n      return this.recentSearches;\n    }.bind(this);\n\n    this.saveRecentSearches = function(searchesArray) {\n      localStorageService.set('recentSearches',angular.toJson(searchesArray));\n    };\n\n    this.addSearch = function(search) {\n      if (typeof search == 'string' && search.length > 0 && this.recentSearches[0] !== search) {\n        this.recentSearches.unshift(search);\n        // if the array have reched to the limit, remove the last one\n        if (this.recentSearches.length > this.searchesLimit) {\n          this.recentSearches.splice(this.searchesLimit, 1);\n        }\n        this.saveRecentSearches(this.recentSearches);\n      }\n      return this.loadRecentSearches();\n    }.bind(this);\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches')\n    .directive('recentSearches', recentSearches);\n\n  /** @ngInject */\n  function recentSearches(RecentSearches) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/recentSearches/recentSearches.html',\n      controller: function($scope) {\n        var vm = this;\n        // hold the view's recent searches\n        this.recentSearches = RecentSearches.loadRecentSearches();\n\n        $scope.$watch(function() {\n          return RecentSearches.recentSearches\n        },function(newRecentSearchList) {\n          vm.recentSearches = newRecentSearchList;\n        })\n      },\n      controllerAs: 'vm'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .service('AppService', AppService);\n\n  /** @ngInject */\n  function AppService(RecentSearches) {\n    this.selectedSearchResult = {};\n    this.recentSearches = RecentSearches.loadRecentSearches();\n\n    this.addRecentSearch = function(search) {\n      this.recentSearches = RecentSearches.addSearch(search);\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.imageContainer', ['ngSanitize']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.imageContainer')\n    .directive('imageContainer', imageContainer);\n\n  /** @ngInject */\n  function imageContainer(AppService, SoundCloudAPI, $timeout) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      bindToController: true,\n      templateUrl: 'app/imageContainer/imageContainer.html',\n      link: function(scope,elm,attrs,ctrl) {\n        var embedElm = elm.find('.embed');\n        var imageContainer = elm.find('.imageContainer');\n\n        ctrl.getEmbed = function(track_url) {\n          SoundCloudAPI.getEmbed(track_url).then(function (embedObject) {\n            // $timeout because the Soundcloud api request is out of Angular scope\n            $timeout(function() {\n              embedElm.removeClass('fadeOut');\n              ctrl.isPlaying = true;\n              embedElm.html(embedObject.html).css('height',embedObject.height);\n              imageContainer.addClass('fadeOut').css('z-index',-1);\n            });\n          });\n        };\n\n        ctrl.showImage = function() {\n          embedElm.addClass('fadeOut');\n          imageContainer.show().removeClass('fadeOut').css('z-index',1);\n        }\n      },\n      controller: function($scope) {\n        var self = this;\n        // model to hold the current sound\n        this.sound = {};\n        // default state of isPlaying variable\n        this.isPlaying = false;\n\n        this.startPlay = function() {\n          if (!this.isPlaying) {\n            this.getEmbed(this.sound.permalink_url);\n          }\n        }.bind(this);\n\n        // watch on AppService.selectedSearchResult to update the image and embed\n        $scope.$watch(function() {\n          return AppService.selectedSearchResult;\n        },function(selectedSound) {\n          if (Object.keys(selectedSound).length > 0) {\n            self.sound = selectedSound;\n            self.isPlaying = false;\n            self.showImage();\n          }\n        })\n      },\n      controllerAs: 'ic'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"soundcloudApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/imageContainer/imageContainer.html\",\"<div class=\\\"imageContainer animated\\\"><div class=\\\"image\\\" ng-click=\\\"ic.startPlay()\\\"><img ng-src=\\\"{{ ic.sound.artwork_url }}\\\"></div></div><div class=\\\"embed animated\\\"></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=\\\"container app\\\"><div class=\\\"col-lg-4\\\"><search></search></div><div class=\\\"col-lg-4\\\"><image-container></image-container></div><div class=\\\"col-lg-4\\\"><recent-searches></recent-searches></div></div>\");\n$templateCache.put(\"app/searchContainer/searchContainer.html\",\"<div class=\\\"searchBar\\\"><form ng-submit=\\\"vm.search()\\\"><div class=\\\"input-group search-form-control\\\"><span class=\\\"input-group-addon\\\"><button type=\\\"submit\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></button> <i class=\\\"fa fa-spinner fa-spin\\\" ng-show=\\\"vm.isLoading\\\"></i></span> <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search\\\" ng-model=\\\"vm.searchQuery\\\"></div></form></div><div class=\\\"searchResults\\\"><ul class=\\\"list-unstyled list-group clearfix\\\"><li ng-repeat=\\\"track in vm.searchResults\\\" ng-click=\\\"vm.selectResult(track)\\\" ng-if=\\\"vm.viewMode == \\'list\\'\\\" ng-class=\\\"{\\'list\\' : vm.viewMode == \\'list\\'}\\\"><a href=\\\"#/\\\" class=\\\"list-group-item\\\">{{ track.title }}</a></li><li ng-repeat=\\\"track in vm.searchResults\\\" ng-click=\\\"vm.selectResult(track)\\\" ng-if=\\\"vm.viewMode == \\'tiles\\'\\\" ng-class=\\\"{\\'tile\\' : vm.viewMode == \\'tiles\\'}\\\"><img ng-src=\\\"{{ track.artwork_url }}\\\"></li></ul></div><div class=\\\"searchControls clearfix\\\"><button class=\\\"btn btn-default pull-left\\\" ng-click=\\\"vm.next()\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></button><div class=\\\"pull-right\\\"><button class=\\\"btn btn-default\\\" ng-class=\\\"{\\'active\\' : vm.viewMode == \\'list\\'}\\\" ng-click=\\\"vm.setViewMode(\\'list\\')\\\"><i class=\\\"fa fa-list\\\"></i></button> <button class=\\\"btn btn-default\\\" ng-class=\\\"{\\'active\\' : vm.viewMode == \\'tiles\\'}\\\" ng-click=\\\"vm.setViewMode(\\'tiles\\')\\\"><i class=\\\"fa fa-th\\\"></i></button></div></div>\");\n$templateCache.put(\"app/recentSearches/recentSearches.html\",\"<h4>Recent Searches</h4><ul class=\\\"list-unstyled\\\"><li ng-repeat=\\\"search in vm.recentSearches track by $index\\\">{{ search }}</li></ul>\");}]);"],"sourceRoot":"/source/"}