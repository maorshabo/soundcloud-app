{"version":3,"sources":["scripts/app-45312b5a94.js"],"names":["angular","module","SC","SoundCloudAPI","$http","clientId","initialize","client_id","nextUrl","this","isLastPage","search","query","limit","get","q","linked_partitioning","then","getSearchResultsSuccess","next","getNextResultsSuccess","results","next_href","Object","isDnextUrl","collection","bind","httpResponse","data","getEmbed","track_url","oEmbed","auto_play","service","$inject","AppService","$timeout","localStorageService","directive","restrict","scope","templateUrl","controller","vm","isLoading","resultsPerPage","viewMode","searchQuery","searchResults","fetchResults","addRecentSearch","selectResult","result","selectedSearchResult","setViewMode","set","controllerAs","RecentSearches","searchesLimit","recentSearches","loadRecentSearches","length","fromJson","saveRecentSearches","searchesArray","toJson","addSearch","unshift","splice","$scope","$watch","newRecentSearchList","MainController","imageContainer","bindToController","link","elm","attrs","ctrl","embedElm","find","embedObject","removeClass","isPlaying","html","css","height","addClass","showImage","show","self","sound","startPlay","permalink_url","selectedSound","keys","routeConfig","$routeProvider","when","otherwise","redirectTo","config","$logProvider","debugEnabled","run","$templateCache","put"],"mappings":"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","file":"scripts/app-45312b5a94.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp', ['ngRoute', 'soundcloudApp.searchContainer','soundcloudApp.imageContainer','soundcloudApp.recentSearches']);\n\n})();\n\n(function(SC) {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .service('SoundCloudAPI', SoundCloudAPI);\n\n  /** @ngInject */\n  function SoundCloudAPI($http) {\n    var self = this;\n    var clientId = 'd652006c469530a4a7d6184b18e16c81';\n    SC.initialize({\n      client_id: clientId\n    });\n\n    // holds the next url in the search results\n    var nextUrl = '';\n    // determine if we are on the last page of results\n    this.isLastPage = true;\n    // search function that gets query and limit and returns a promise\n    this.search = function(query,limit) {\n      return SC.get('/tracks',{\n        q: query,\n        limit: limit,\n        linked_partitioning: 1\n      }).then(getSearchResultsSuccess);\n    };\n\n    this.next = function() {\n      if (nextUrl) {\n        return $http.get(nextUrl).then(getNextResultsSuccess)\n      }\n    };\n\n    var getSearchResultsSuccess = function(results) {\n      nextUrl = results.next_href;\n      if (nextUrl) {\n        this.isLastPage = false\n      }\n      else {\n        this.isLastPage = Object.isDnextUrl\n      }\n      return results.collection;\n    }.bind(this);\n\n    var getNextResultsSuccess = function(httpResponse) {\n      return getSearchResultsSuccess(httpResponse.data);\n    };\n\n    this.getEmbed = function(track_url) {\n      if (track_url)\n        return SC.oEmbed(track_url, { auto_play: true });\n    }\n  }\n})(SC);\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.searchContainer', []);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.searchContainer')\n    .directive('search', search);\n\n  /** @ngInject */\n  function search(SoundCloudAPI,AppService,$timeout,localStorageService) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/searchContainer/searchContainer.html',\n      controller: function() {\n        var vm = this;\n        this.isLoading = false;\n        // holds how much results per page\n        this.resultsPerPage = 6;\n        // hold current view mode state: (list,tiles)\n        this.viewMode = localStorageService.get('viewMode') || 'list';\n        // view model to hold the search query\n        this.searchQuery = '';\n        // holds the search results\n        this.searchResults = [];\n        // get results from the SoundCloudAPI service\n        this.search = function() {\n          this.isLoading = true;\n          this.searchResults = [];\n          SoundCloudAPI.search(this.searchQuery,this.resultsPerPage).then(vm.fetchResults);\n          AppService.addRecentSearch(this.searchQuery);\n        }.bind(this);\n\n        // function to get the next bunch of data\n        this.next = function() {\n          if (!SoundCloudAPI.isLastPage) {\n            this.isLoading = true;\n            SoundCloudAPI.next().then(vm.fetchResults)\n          }\n        }.bind(this);\n\n        // handle click on a result item\n        this.selectResult = function(result) {\n          AppService.selectedSearchResult = result;\n        };\n\n        this.fetchResults = function(results) {\n          $timeout(function() {\n            vm.searchResults = results;\n            vm.isLoading = false;\n          });\n        };\n\n        this.setViewMode = function(viewMode) {\n          this.viewMode = viewMode;\n          localStorageService.set('viewMode',viewMode);\n        }.bind(this);\n      },\n      controllerAs: 'vm'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches', ['LocalStorageModule']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches')\n    .service('RecentSearches', RecentSearches);\n\n  /** @ngInject */\n  function RecentSearches(localStorageService) {\n    // holds the searches history max limit\n    this.searchesLimit = 5;\n    this.recentSearches = [];\n\n    this.loadRecentSearches = function() {\n      if (this.recentSearches.length == 0)\n        this.recentSearches = angular.fromJson(localStorageService.get('recentSearches')) || [];\n      return this.recentSearches;\n    }.bind(this);\n\n    this.saveRecentSearches = function(searchesArray) {\n      localStorageService.set('recentSearches',angular.toJson(searchesArray));\n    };\n\n    this.addSearch = function(search) {\n      if (typeof search == 'string' && search.length > 0 && this.recentSearches[0] !== search) {\n        this.recentSearches.unshift(search);\n        // if the array have reched to the limit, remove the last one\n        if (this.recentSearches.length > this.searchesLimit) {\n          this.recentSearches.splice(this.searchesLimit, 1);\n        }\n        this.saveRecentSearches(this.recentSearches);\n      }\n      return this.loadRecentSearches();\n    }.bind(this);\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.recentSearches')\n    .directive('recentSearches', recentSearches);\n\n  /** @ngInject */\n  function recentSearches(RecentSearches) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/recentSearches/recentSearches.html',\n      controller: function($scope) {\n        var vm = this;\n        // hold the view's recent searches\n        this.recentSearches = RecentSearches.loadRecentSearches();\n\n        $scope.$watch(function() {\n          return RecentSearches.recentSearches\n        },function(newRecentSearchList) {\n          vm.recentSearches = newRecentSearchList;\n        })\n      },\n      controllerAs: 'vm'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .service('AppService', AppService);\n\n  /** @ngInject */\n  function AppService(RecentSearches) {\n    this.selectedSearchResult = {};\n    this.recentSearches = RecentSearches.loadRecentSearches();\n\n    this.addRecentSearch = function(search) {\n      this.recentSearches = RecentSearches.addSearch(search);\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.imageContainer', ['ngSanitize']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp.imageContainer')\n    .directive('imageContainer', imageContainer);\n\n  /** @ngInject */\n  function imageContainer(AppService, SoundCloudAPI, $timeout) {\n    var directive = {\n      restrict: 'E',\n      scope: {},\n      bindToController: true,\n      templateUrl: 'app/imageContainer/imageContainer.html',\n      link: function(scope,elm,attrs,ctrl) {\n        var embedElm = elm.find('.embed');\n        var imageContainer = elm.find('.imageContainer');\n\n        ctrl.getEmbed = function(track_url) {\n          SoundCloudAPI.getEmbed(track_url).then(function (embedObject) {\n            // $timeout because the Soundcloud api request is out of Angular scope\n            $timeout(function() {\n              embedElm.removeClass('fadeOut');\n              ctrl.isPlaying = true;\n              embedElm.html(embedObject.html).css('height',embedObject.height);\n              imageContainer.addClass('fadeOut');\n            });\n          });\n        };\n\n        ctrl.showImage = function() {\n          embedElm.addClass('fadeOut');\n          imageContainer.show().removeClass('fadeOut');\n        }\n      },\n      controller: function($scope) {\n        var self = this;\n        // model to hold the current sound\n        this.sound = {};\n        // default state of isPlaying variable\n        this.isPlaying = false;\n\n        this.startPlay = function() {\n          if (!this.isPlaying) {\n            this.getEmbed(this.sound.permalink_url);\n          }\n        }.bind(this);\n\n        // watch on AppService.selectedSearchResult to update the image and embed\n        $scope.$watch(function() {\n          return AppService.selectedSearchResult;\n        },function(selectedSound) {\n          if (Object.keys(selectedSound).length > 0) {\n            self.sound = selectedSound;\n            self.isPlaying = false;\n            self.showImage();\n          }\n        })\n      },\n      controllerAs: 'ic'\n    };\n\n    return directive;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('soundcloudApp')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"soundcloudApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/imageContainer/imageContainer.html\",\"<div class=\\\"imageContainer animated\\\"><div class=\\\"image\\\" ng-click=\\\"ic.startPlay()\\\"><img ng-src=\\\"{{ ic.sound.artwork_url }}\\\"></div></div><div class=\\\"embed animated\\\"></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=\\\"container app\\\"><div class=\\\"col-lg-4\\\"><search></search></div><div class=\\\"col-lg-4\\\"><image-container></image-container></div><div class=\\\"col-lg-4\\\"><recent-searches></recent-searches></div></div>\");\n$templateCache.put(\"app/recentSearches/recentSearches.html\",\"<h4>Recent Searches</h4><ul class=\\\"list-unstyled\\\"><li ng-repeat=\\\"search in vm.recentSearches track by $index\\\">{{ search }}</li></ul>\");\n$templateCache.put(\"app/searchContainer/searchContainer.html\",\"<div class=\\\"searchBar\\\"><form ng-submit=\\\"vm.search()\\\"><div class=\\\"input-group search-form-control\\\"><span class=\\\"input-group-addon\\\"><button type=\\\"submit\\\"><span class=\\\"glyphicon glyphicon-search\\\"></span></button> <i class=\\\"fa fa-spinner fa-spin\\\" ng-show=\\\"vm.isLoading\\\"></i></span> <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search\\\" ng-model=\\\"vm.searchQuery\\\"></div></form></div><div class=\\\"searchResults\\\"><ul class=\\\"list-unstyled list-group clearfix\\\"><li ng-repeat=\\\"track in vm.searchResults\\\" ng-click=\\\"vm.selectResult(track)\\\" ng-if=\\\"vm.viewMode == \\'list\\'\\\" ng-class=\\\"{\\'list\\' : vm.viewMode == \\'list\\'}\\\"><a href=\\\"#/\\\" class=\\\"list-group-item\\\">{{ track.title }}</a></li><li ng-repeat=\\\"track in vm.searchResults\\\" ng-click=\\\"vm.selectResult(track)\\\" ng-if=\\\"vm.viewMode == \\'tiles\\'\\\" ng-class=\\\"{\\'tile\\' : vm.viewMode == \\'tiles\\'}\\\"><img ng-src=\\\"{{ track.artwork_url }}\\\"></li></ul></div><div class=\\\"searchControls clearfix\\\"><button class=\\\"btn btn-default pull-left\\\" ng-click=\\\"vm.next()\\\"><span class=\\\"glyphicon glyphicon-arrow-right\\\"></span></button><div class=\\\"pull-right\\\"><button class=\\\"btn btn-default\\\" ng-class=\\\"{\\'active\\' : vm.viewMode == \\'list\\'}\\\" ng-click=\\\"vm.setViewMode(\\'list\\')\\\"><i class=\\\"fa fa-list\\\"></i></button> <button class=\\\"btn btn-default\\\" ng-class=\\\"{\\'active\\' : vm.viewMode == \\'tiles\\'}\\\" ng-click=\\\"vm.setViewMode(\\'tiles\\')\\\"><i class=\\\"fa fa-th\\\"></i></button></div></div>\");}]);"],"sourceRoot":"/source/"}