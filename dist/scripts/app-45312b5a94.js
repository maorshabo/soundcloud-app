!function(){"use strict";angular.module("soundcloudApp",["ngRoute","soundcloudApp.searchContainer","soundcloudApp.imageContainer","soundcloudApp.recentSearches"])}(),function(e){"use strict";function t(t){var n="d652006c469530a4a7d6184b18e16c81";e.initialize({client_id:n});var s="";this.isLastPage=!0,this.search=function(t,n){return e.get("/tracks",{q:t,limit:n,linked_partitioning:1}).then(i)},this.next=function(){return s?t.get(s).then(c):void 0};var i=function(e){return s=e.next_href,s?this.isLastPage=!1:this.isLastPage=Object.isDnextUrl,e.collection}.bind(this),c=function(e){return i(e.data)};this.getEmbed=function(t){return t?e.oEmbed(t,{auto_play:!0}):void 0}}angular.module("soundcloudApp").service("SoundCloudAPI",t),t.$inject=["$http"]}(SC),function(){"use strict";angular.module("soundcloudApp.searchContainer",[])}(),function(){"use strict";function e(e,t,n,s){var i={restrict:"E",scope:{},templateUrl:"app/searchContainer/searchContainer.html",controller:function(){var i=this;this.isLoading=!1,this.resultsPerPage=6,this.viewMode=s.get("viewMode")||"list",this.searchQuery="",this.searchResults=[],this.search=function(){this.isLoading=!0,this.searchResults=[],e.search(this.searchQuery,this.resultsPerPage).then(i.fetchResults),t.addRecentSearch(this.searchQuery)}.bind(this),this.next=function(){e.isLastPage||(this.isLoading=!0,e.next().then(i.fetchResults))}.bind(this),this.selectResult=function(e){t.selectedSearchResult=e},this.fetchResults=function(e){n(function(){i.searchResults=e,i.isLoading=!1})},this.setViewMode=function(e){this.viewMode=e,s.set("viewMode",e)}.bind(this)},controllerAs:"vm"};return i}angular.module("soundcloudApp.searchContainer").directive("search",e),e.$inject=["SoundCloudAPI","AppService","$timeout","localStorageService"]}(),function(){"use strict";angular.module("soundcloudApp.recentSearches",["LocalStorageModule"])}(),function(){"use strict";function e(e){this.searchesLimit=5,this.recentSearches=[],this.loadRecentSearches=function(){return 0==this.recentSearches.length&&(this.recentSearches=angular.fromJson(e.get("recentSearches"))||[]),this.recentSearches}.bind(this),this.saveRecentSearches=function(t){e.set("recentSearches",angular.toJson(t))},this.addSearch=function(e){return"string"==typeof e&&e.length>0&&this.recentSearches[0]!==e&&(this.recentSearches.unshift(e),this.recentSearches.length>this.searchesLimit&&this.recentSearches.splice(this.searchesLimit,1),this.saveRecentSearches(this.recentSearches)),this.loadRecentSearches()}.bind(this)}angular.module("soundcloudApp.recentSearches").service("RecentSearches",e),e.$inject=["localStorageService"]}(),function(){"use strict";function e(e){var t={restrict:"E",scope:{},templateUrl:"app/recentSearches/recentSearches.html",controller:function(t){var n=this;this.recentSearches=e.loadRecentSearches(),t.$watch(function(){return e.recentSearches},function(e){n.recentSearches=e})},controllerAs:"vm"};return t}angular.module("soundcloudApp.recentSearches").directive("recentSearches",e),e.$inject=["RecentSearches"]}(),function(){"use strict";function e(e){this.selectedSearchResult={},this.recentSearches=e.loadRecentSearches(),this.addRecentSearch=function(t){this.recentSearches=e.addSearch(t)}}angular.module("soundcloudApp").service("AppService",e),e.$inject=["RecentSearches"]}(),function(){"use strict";function e(){}angular.module("soundcloudApp").controller("MainController",e)}(),function(){"use strict";angular.module("soundcloudApp.imageContainer",["ngSanitize"])}(),function(){"use strict";function e(e,t,n){var s={restrict:"E",scope:{},bindToController:!0,templateUrl:"app/imageContainer/imageContainer.html",link:function(e,s,i,c){var a=s.find(".embed"),r=s.find(".imageContainer");c.getEmbed=function(e){t.getEmbed(e).then(function(e){n(function(){a.removeClass("fadeOut"),c.isPlaying=!0,a.html(e.html).css("height",e.height),r.addClass("fadeOut")})})},c.showImage=function(){a.addClass("fadeOut"),r.show().removeClass("fadeOut")}},controller:function(t){var n=this;this.sound={},this.isPlaying=!1,this.startPlay=function(){this.isPlaying||this.getEmbed(this.sound.permalink_url)}.bind(this),t.$watch(function(){return e.selectedSearchResult},function(e){Object.keys(e).length>0&&(n.sound=e,n.isPlaying=!1,n.showImage())})},controllerAs:"ic"};return s}angular.module("soundcloudApp.imageContainer").directive("imageContainer",e),e.$inject=["AppService","SoundCloudAPI","$timeout"]}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).otherwise({redirectTo:"/"})}angular.module("soundcloudApp").config(e),e.$inject=["$routeProvider"]}(),function(){"use strict";function e(e){e.debugEnabled(!0)}angular.module("soundcloudApp").config(e),e.$inject=["$logProvider"]}(),angular.module("soundcloudApp").run(["$templateCache",function(e){e.put("app/imageContainer/imageContainer.html",'<div class="imageContainer animated"><div class="image" ng-click="ic.startPlay()"><img ng-src="{{ ic.sound.artwork_url }}"></div></div><div class="embed animated"></div>'),e.put("app/main/main.html",'<div class="container app"><div class="col-lg-4"><search></search></div><div class="col-lg-4"><image-container></image-container></div><div class="col-lg-4"><recent-searches></recent-searches></div></div>'),e.put("app/recentSearches/recentSearches.html",'<h4>Recent Searches</h4><ul class="list-unstyled"><li ng-repeat="search in vm.recentSearches track by $index">{{ search }}</li></ul>'),e.put("app/searchContainer/searchContainer.html",'<div class="searchBar"><form ng-submit="vm.search()"><div class="input-group search-form-control"><span class="input-group-addon"><button type="submit"><span class="glyphicon glyphicon-search"></span></button> <i class="fa fa-spinner fa-spin" ng-show="vm.isLoading"></i></span> <input type="text" class="form-control" placeholder="Search" ng-model="vm.searchQuery"></div></form></div><div class="searchResults"><ul class="list-unstyled list-group clearfix"><li ng-repeat="track in vm.searchResults" ng-click="vm.selectResult(track)" ng-if="vm.viewMode == \'list\'" ng-class="{\'list\' : vm.viewMode == \'list\'}"><a href="#/" class="list-group-item">{{ track.title }}</a></li><li ng-repeat="track in vm.searchResults" ng-click="vm.selectResult(track)" ng-if="vm.viewMode == \'tiles\'" ng-class="{\'tile\' : vm.viewMode == \'tiles\'}"><img ng-src="{{ track.artwork_url }}"></li></ul></div><div class="searchControls clearfix"><button class="btn btn-default pull-left" ng-click="vm.next()"><span class="glyphicon glyphicon-arrow-right"></span></button><div class="pull-right"><button class="btn btn-default" ng-class="{\'active\' : vm.viewMode == \'list\'}" ng-click="vm.setViewMode(\'list\')"><i class="fa fa-list"></i></button> <button class="btn btn-default" ng-class="{\'active\' : vm.viewMode == \'tiles\'}" ng-click="vm.setViewMode(\'tiles\')"><i class="fa fa-th"></i></button></div></div>')}]);
//# sourceMappingURL=../maps/scripts/app-45312b5a94.js.map
